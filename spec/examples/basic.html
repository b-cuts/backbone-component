<html>
    <head>
        <title>Backbone.Component: basic test</title>
        <script src="https://code.jquery.com/jquery-2.1.1.js"></script>
        <script src="../../bower_components/underscore/underscore.js"></script>
        <script src="../../bower_components/backbone/backbone.js"></script>
        <script src="../../backbone-component.js"></script>
        <script>
            Example = { };

            Example.Component1 = Backbone.Component.extend(
                {
                    events: {
                        "click a" : "change"
                    } ,
                    generate: _.template(
                        "<a href=\"#\">Example component 1</a>"
                    ) ,
                    change: function( evt ) {
                        evt.preventDefault( );
                        this.$( "a" ).text( this.$( "a" ).text( ) + "." );
                    }
                }
            );

            Example.Component2 = Backbone.Component.extend(
                {
                    id: "cmp-2",
                    className: "component-2",
                    tagName: "div",
                    generate: _.template(
                        "Example component 2"
                    )
                }
            );

            Example.Helper = Backbone.Helper.extend(
                {
                    generate: _.template( "<strong>Example helper</strong>" )
                }
            );

            Example.View = Backbone.View.extend(
                {
                    template: _.template(
                        " \
                        <p><%= this.insertComponent1( ) %></p> \
                        <%= this.insertComponent2( ) %> \
                        <p><%= this.insertHelper( ) %></p> \
                        "
                    ) ,
                    render: function( ) {
                        this.$el.html( this.template( ) );
                    }
                }
            );

            $(
                function( ) {
                    Backbone.Component.initialize( { "namespace" : Example } );

                    var view = new Example.View;
                    view.setElement( $( "body" ) );
                    view.render( );
                }
            );
        </script>
    </head>
    <body>
    </body>
</html>
